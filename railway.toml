[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
# telegram-bot-api 会自动从环境变量读取 TELEGRAM_API_ID 和 TELEGRAM_API_HASH
startCommand = "telegram-bot-api --http-port=8081 --local --verbosity=3"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[service]
internalPort = 8081

# 环境变量配置（在Railway控制台设置）
[[env]]
name = "TELEGRAM_API_ID"
description = "Your Telegram API ID from https://my.telegram.org"

[[env]]
name = "TELEGRAM_API_HASH"
description = "Your Telegram API Hash from https://my.telegram.org"

[[env]]
name = "TELEGRAM_LOCAL"
description = "Enable local mode features"
default = "true"

[[env]]
name = "TELEGRAM_STAT"
description = "Enable statistics endpoint"
default = "true"

[[env]]
name = "TELEGRAM_VERBOSITY"
description = "Logging verbosity level (0-3)"
default = "3"

[[env]]
name = "TELEGRAM_HTTP_IDLE_TIMEOUT"
description = "HTTP idle timeout in seconds"
default = "500"
